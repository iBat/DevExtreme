<!DOCTYPE html>
<html lang="en">
<head>
    <title>DevExtreme jQuery Example</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript">
        const currentThemeId = localStorage.getItem("currentThemeId") || "light";

        const link = document.createElement("link");
        link.href = `../artifacts/css/dx.${currentThemeId}.css`;
        link.type = "text/css";
        link.rel = "stylesheet";

        document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <script type="text/javascript" src="../artifacts/js/jquery.js"></script>
    <!-- HtmlEditor -->
     <script type="text/javascript" src="../artifacts/js/dx-quill.min.js"></script>

    <!--<script type="text/javascript" src="../artifacts/js/cldr.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/event.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/supplemental.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/unresolved.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/message.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/number.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/currency.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/date.js"></script>-->

    <!--
    <script type="text/javascript" src="../artifacts/js/exceljs.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/FileSaver.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jszip.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.plugin.autotable.min.js"></script>
    -->

    <script type="text/javascript" src="../artifacts/js/dx.all.debug.js" charset="utf-8"></script>
    <script type="text/javascript" src="./themeSelector.js"></script>
    <script type="text/javascript" src="../../../node_modules/axe-core/axe.min.js"></script>
</head>
<body class="dx-surface">
    <div role="main">
        <h1 style="position: fixed; left: 0; top: 0; clip: rect(1px, 1px, 1px, 1px);">Test header</h1>

        <select id="theme-selector" style="display: block;">
        </select>
        <br />
        <div id="html-editor"></div>
        <div id='button'>Log editor value</div>
        <script>
            const markup = `
    <h2>
        <img src="https://js.devexpress.com/Demos/WidgetsGallery/Content/Images/Widgets/HtmlEditor.svg" alt="HtmlEditor">
        Formatted Text Editor (HTML Editor)
    </h2>
    <br>
    <p>---</p><a href="https://www.youtube.com/embed/dQw4w9WgXcQ">https://www.youtube.com/embed/dQw4w9WgXcQ</a><p>---</p>
`;

            $(function() {
                const editor = $('#html-editor').dxHtmlEditor({
                    height: 725,
                    value: markup,
                    customizeModules(cfg) {
                        cfg.clipboard.matchers.push([
                            "a",
                            (node, delta) => {
                                const isVideo = /youtu[.]?be/g.test(node.hostname);

                                if (isVideo) {
                                    const length = delta.length();

                                    delta.insert({ video: node.href }).insert("\n");
                                    return delta.slice(length);
                                }
                                return delta;
                            }
                        ]);
                    },
                    imageUpload: {
                        tabs: ['file', 'url'],
                        fileUploadMode: 'base64',
                    },
                    toolbar: {
                        items: [
                            /*'undo', 'redo', 'separator',
                            {
                                name: 'size',
                                acceptedValues: ['8pt', '10pt', '12pt', '14pt', '18pt', '24pt', '36pt'],
                                options: { inputAttr: { 'aria-label': 'Font size' } },
                            },
                            {
                                name: 'font',
                                acceptedValues: ['Arial', 'Courier New', 'Georgia', 'Impact', 'Lucida Console', 'Tahoma', 'Times New Roman', 'Verdana'],
                                options: { inputAttr: { 'aria-label': 'Font family' } },
                            },
                            'separator', 'bold', 'italic', 'strike', 'underline', 'separator',
                            'alignLeft', 'alignCenter', 'alignRight', 'alignJustify', 'separator',
                            'orderedList', 'bulletList', 'separator',
                            {
                                name: 'header',
                                acceptedValues: [false, 1, 2, 3, 4, 5],
                                options: { inputAttr: { 'aria-label': 'Header' } },
                            }, 'separator',
                            'color', 'background', 'separator',
                            */'link', 'image', 'video', /*'separator',
                            'clear', 'codeBlock', 'blockquote', 'separator',
                            'insertTable', 'deleteTable',
                            'insertRowAbove', 'insertRowBelow', 'deleteRow',
                            'insertColumnLeft', 'insertColumnRight', 'deleteColumn',*/
                        ],
                    },
                    mediaResizing: {
                        enabled: true,
                    },
                }).dxHtmlEditor('instance');

                $('#button').dxButton({
                    onClick: () => {
                        console.log(editor.option('value'));
                    }
                });
            });
        </script>
    </div>
</body>
</html>
